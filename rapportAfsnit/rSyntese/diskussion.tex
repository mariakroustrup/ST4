\section{Diskussion}
Formålet med dette projekt er at udvikle et system, som kan opsamle signaler fra kroppen, hvor der er fokus på digital signalbehandling og datakommunikation \citep{aalborguniversitet2014}. På baggrund af dette er der udviklet et system, der kan måle muskelaktivtet fra rectus femoris ved hjælp af EMG og måle vinklen over knæet ved hjælp af accelerometre, og som har til formål at støtte knæets omkringliggende muskler, så ALS-patienter støttes i forbindelse med udførelsen af en squat-øvelse. På baggrund af teori, implementering og test af systemets enkelte blokke fremgår det, at kravene til de enkelte blokke er overholdt. Der er dog nogle områder, hvor andre alternativer kan overvejes for mulige forbedringer af hele systemet. 

%\subsection{Implementering}
Systemet er udviklet, så størstedelen af signalbehandlingen foregår digitalt, da dette er fokus i forhold til studieordningen. Hvis dette ikke havde været et krav for dette semester, kunne det have været en fordel, at nogle af blokkene var designet analogt, hvorved det kunne være nemmere at finde samt rette op på eventuelle fejl i systemet. Et eksempel herpå er i forhold til opsamling af signaler fra accelerometre. 

For at give en bedre opløsning af accelerometrene kunne det være relevant at implementere en forstærker inden ADC'en, hvorved der opnås en bedre repræsentation af accelerometersignalerne. Denne forstærker blev ikke implementeret, da det ville kræve en analog offsetjustering af signalet, så signalet ikke vil gå i mætning, da signalet med offset vil kunne overstige ADC'ens arbejsområde. %. Offsettet er teoretisk ved en påvirkning af $0~g$ den halve spændingsforsyning. Uden denne offsetjustering vil det kunne resultere i, at signalet vil gå i mætningen, da dette vil kunne overstige ADC'ens arbejdsområde alt efter hvor meget signalet forstærkes, hvorved der yderligere skal tages højde for denne parameter.

%Der kunne i stedet for accelerometrene være implementeret andre sensorer til vinkelmåling - eksempelvis gyroskop eller et goniometer. Ved et gyroskop anvendes impulsmomentbevarelse, hvorved det kan udregnes hvor meget patienten har bevæget sig under en squat-øvelse. Ved goniometer er det muligt at se, hvilken vinkel knæet har i oprejst position og hvor meget det så har bevæget sig. Da der ønskes at beregne vinklen gennem hele øvelsen, blev disse sensorer fravalgt. Udover disse kriterier  var accelerometrene også til rådighed. Da det er muligt at videreudvikle systemet så det kan benyttes under gang, vil det også være fordelagtigt at anvende accelerometre, det skal dog vurderes om der skal anvendes andre, da det kræver at accelerometrene har et større arbejdsområde end $\pm3~g$.

Systemet benytter herudover en udleveret komponent, EMG-forstærkeren, der ensretter, forstærker og envelopefiltrerer signalet. Denne blok kunne være fordelagtig at implementere som flere blokke, så det ville være muligt at teste og dokumentere disse hver for sig. På denne måde vil det være muligt at opstille krav til hver blok og justere og ændre disse blokke. Dette vil dog ikke påvirke systemet, som det er nu, da EMG-forstærkeren opfylder de opstillede krav. %Dog vil  eventuelle forsinkelser og ændringer ikke have den store betydning ved at anvende EMG-forstærkeren, da signalet er meget lavfrekvent og det vil derfor ikke have en betydning for repræsentation af muskelaktiviteten. 

Testen af systemets vinkelberegning viste afvigelser mellem $0,3$ og $4,2~\%$. Dette kan resultere i, at systemet ikke fungerer som tiltænkt, hvis $90-180^{\circ}$ vinkel over knæet overskrides. Som nævnt i \autoref{sec:knaeled_squat}, kan sammenhængen mellem stigende og faldende muskelaktivitet og nedad og opadgående squat kun antages, når knæets vinkel befinder sig inden for $90-180^{\circ}$. Af denne grund kan det ikke antages, at systemet vil fungere, hvis vinkelberegningen skulle afvige ved enten $90^{\circ}$ eller $180^{\circ}$. For at forbedre dette, vil intervallerne mellem de grader, hvor accelerometrenes spænding er samplet, kunne indskrænkes. Dette vil kunne mindske afvigelserne på vinkelberegningen, da der ikke er en fuldstændig lineær sammenhæng mellem spændinger og vinkler - jo større intervallet derfor er, jo større er usikkerheden af vinkelberegningen også.

I projektet er der valgt at anvende trådløs kommunikation, så ledninger ikke vil være til gene for brugeren af systemet. Dog kan dette have konsekvenser i form af mulig forsinkelse, hvilket vil kunne medføre, at et muligt exoskelet ikke vil fungere i real-term. Dette kan løses ved at koble systemets dele med ledninger, så det ikke er trådløst, men det vil medføre, at rækkevidden af systemets enkelte dele er stærkt begrænset. Til implementering på et exoskelet vurderes dette dog ikke til at være et problem, da det da vil være hensigtsmæssigt at sætte systemet fast på exoskelettet, så det ikke er nødvendigt at bekymre sig om at være inden for rækkevidden af den trådløse kommunikation.



%\subsection{Batteridrevet}
%På nuværende tidspunkt er systemet batteridrevet, hvorfor der skal tages højde for batteriets levetid og hvorvidt det er muligt at forlænge battieriets levetid og dermed gøre systemet så effektivt som muligt. (skriv mere..)

%\subsection{Videreudvikling}
%Systemet vil ikke være anvendeligt for ALS-patienter på nuværende tidspunkt, da systemet ikke er færdigudviklet. En prototype af systemet ved anvendelse af et exoskelet vil støtte musklerne omkring knæet under udførelse af squat-øvelse. 

%På baggrund af det udviklede systemet, vil det være muligt at videreudvikle systemet, så det kan støtte benmuskulaturen under gang, hvorved det vil være mere essentielt at anvende for ALS-patienter. For at kunne udvikle sådan et system skal flere ukendte parametre, som kan variere fra patient til patient undersøges. Systemet ses som en hjælp til brugeren, da det ikke vil yde nogen behandling. 

%\subsection{Brugervenlighed}
%For at systemet er mere brugervenligt, er der implementeret LED'er som viser brugeren, hvornår knæet har bevæget sig over eller under den valgte vinkel på henholdsvis $90^{\circ}$ og $180^{\circ}$. For at optimere brugervenligheden kunne dette også gøres ved at indføre vibration, som oplyser patienten om dette, hvilket vil være mere optimalt, da patienten ikke kan ses LED'erne under øvelsen. Samtidig kunne denne besked blive sendt til brugeren inden grænsen er overskredet for at advare brugeren. 

%Derudover har systemet en start- og stopfunktion. Dette kan både være en fordel og ulempe for brugeren. Det vil være nødvendigt at skulle starte og stoppe hver gang systemet skal anvendes, hvilket kan være til gene for brugeren over en længere tidsperiode. Det vil være fordelagtigt, da gør det muligt for brugeren selv at bestemme, hvornår øvelsen skal starte og stoppe.

%\subsection{Samlet systemtest}